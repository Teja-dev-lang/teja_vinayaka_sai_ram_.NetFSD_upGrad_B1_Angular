<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <body>
  <div id="output"></div>

</body>
    <script>
        let employees = [
            { id: 1, name: "Ravi", dept: "IT", salary: 70000 },
            { id: 2, name: "Anita", dept: "HR", salary: 50000 },
            { id: 3, name: "Karan", dept: "IT", salary: 80000 },
            { id: 4, name: "Meena", dept: "Finance", salary: 60000 }
        ];

        let totalSalaryExpense = employees.reduce((sum, emp) => {
            return sum + emp.salary;
        }, 0);

        console.log(totalSalaryExpense);

        let highestPaid = employees.reduce((max, emp) => {
            return emp.salary > max.salary ? emp : max;
        });

        let lowestPaid = employees.reduce((min, emp) => {
            return emp.salary < min.salary ? emp : min;
        });

        console.log(highestPaid);
        console.log(lowestPaid);

        let updatedSalaries = employees.map(emp => {
            return emp.dept === "IT"
                ? { ...emp, salary: emp.salary * 1.15 }
                : emp;
        });

        console.log(updatedSalaries);

        let groupedByDept = employees.reduce((group, emp) => {
            if (!group[emp.dept]) {
                group[emp.dept] = [];
            }
            group[emp.dept].push(emp);
            return group;
        }, {});

        console.log(groupedByDept);

        let deptAvgSalary = employees.reduce((acc, emp) => {
            if (!acc[emp.dept]) {
                acc[emp.dept] = { total: 0, count: 0 };
            }
            acc[emp.dept].total += emp.salary;
            acc[emp.dept].count += 1;
            return acc;
        }, {});

        let deptWiseAverage = Object.keys(deptAvgSalary).map(dept => ({
            dept,
            average: deptAvgSalary[dept].total / deptAvgSalary[dept].count
        }));

        console.log(deptWiseAverage);

        let sortedBySalaryDesc = [...employees].sort((a, b) => {
            return b.salary - a.salary;
        });

        console.log(sortedBySalaryDesc);

        let afterTax = employees.map(emp => ({
            ...emp,
            salaryAfterTax: emp.salary * 0.9
        }));

        console.log(afterTax);

        let averageSalary =
            totalSalaryExpense / employees.length;

        let aboveAverageEarners = employees.filter(emp => {
            return emp.salary > averageSalary;
        });

        console.log(aboveAverageEarners);

        let employeeTable =
            "<table border='1'>" +
            "<tr><th>ID</th><th>Name</th><th>Department</th><th>Salary</th></tr>" +
            employees.map(emp =>
                `<tr>
      <td>${emp.id}</td>
      <td>${emp.name}</td>
      <td>${emp.dept}</td>
      <td>${emp.salary}</td>
     </tr>`
            ).join("") +
            "</table>";

        document.getElementById("output").innerHTML = employeeTable;
    </script>
</body>

</html>